<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 14 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
h1
	{mso-style-link:"Heading 1 Char";
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Cambria","serif";}
h2
	{mso-style-link:"Heading 2 Char";
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Cambria","serif";
	font-style:italic;}
h3
	{mso-style-link:"Heading 3 Char";
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	page-break-after:avoid;
	font-size:13.0pt;
	font-family:"Cambria","serif";}
h4
	{mso-style-link:"Heading 4 Char";
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Times New Roman","serif";}
h5
	{mso-style-link:"Heading 5 Char";
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	font-size:13.0pt;
	font-family:"Times New Roman","serif";
	font-style:italic;}
h6
	{mso-style-link:"Heading 6 Char";
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoHeading7, li.MsoHeading7, div.MsoHeading7
	{mso-style-link:"Heading 7 Char";
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoHeading8, li.MsoHeading8, div.MsoHeading8
	{mso-style-link:"Heading 8 Char";
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	font-style:italic;}
p.MsoHeading9, li.MsoHeading9, div.MsoHeading9
	{mso-style-link:"Heading 9 Char";
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	font-size:11.0pt;
	font-family:"Cambria","serif";}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"Header Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"Footer Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoCaption, li.MsoCaption, div.MsoCaption
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"Title Char";
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	text-align:center;
	font-size:16.0pt;
	font-family:"Cambria","serif";
	font-weight:bold;}
p.MsoSubtitle, li.MsoSubtitle, div.MsoSubtitle
	{mso-style-link:"Subtitle Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	text-align:center;
	font-size:12.0pt;
	font-family:"Cambria","serif";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
em
	{font-family:"Calibri","sans-serif";
	font-weight:bold;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"Balloon Text Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:"Tahoma","sans-serif";}
p.MsoNoSpacing, li.MsoNoSpacing, div.MsoNoSpacing
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoQuote, li.MsoQuote, div.MsoQuote
	{mso-style-link:"Quote Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	font-style:italic;}
p.MsoIntenseQuote, li.MsoIntenseQuote, div.MsoIntenseQuote
	{mso-style-link:"Intense Quote Char";
	margin-top:0in;
	margin-right:.5in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;
	font-style:italic;}
span.MsoSubtleEmphasis
	{color:#5A5A5A;
	font-style:italic;}
span.MsoIntenseEmphasis
	{font-weight:bold;
	font-style:italic;
	text-decoration:underline;}
span.MsoSubtleReference
	{text-decoration:underline;}
span.MsoIntenseReference
	{font-weight:bold;
	text-decoration:underline;}
span.MsoBookTitle
	{font-family:"Cambria","serif";
	font-weight:bold;
	font-style:italic;}
p.MsoTocHeading, li.MsoTocHeading, div.MsoTocHeading
	{margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Cambria","serif";
	font-weight:bold;}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Cambria","serif";
	font-weight:bold;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Cambria","serif";
	font-weight:bold;
	font-style:italic;}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-link:"Heading 3";
	font-family:"Cambria","serif";
	font-weight:bold;}
span.Heading4Char
	{mso-style-name:"Heading 4 Char";
	mso-style-link:"Heading 4";
	font-weight:bold;}
span.Heading5Char
	{mso-style-name:"Heading 5 Char";
	mso-style-link:"Heading 5";
	font-weight:bold;
	font-style:italic;}
span.Heading6Char
	{mso-style-name:"Heading 6 Char";
	mso-style-link:"Heading 6";
	font-weight:bold;}
span.Heading7Char
	{mso-style-name:"Heading 7 Char";
	mso-style-link:"Heading 7";}
span.Heading8Char
	{mso-style-name:"Heading 8 Char";
	mso-style-link:"Heading 8";
	font-style:italic;}
span.Heading9Char
	{mso-style-name:"Heading 9 Char";
	mso-style-link:"Heading 9";
	font-family:"Cambria","serif";}
span.TitleChar
	{mso-style-name:"Title Char";
	mso-style-link:Title;
	font-family:"Cambria","serif";
	font-weight:bold;}
span.SubtitleChar
	{mso-style-name:"Subtitle Char";
	mso-style-link:Subtitle;
	font-family:"Cambria","serif";}
span.QuoteChar
	{mso-style-name:"Quote Char";
	mso-style-link:Quote;
	font-style:italic;}
span.IntenseQuoteChar
	{mso-style-name:"Intense Quote Char";
	mso-style-link:"Intense Quote";
	font-weight:bold;
	font-style:italic;}
span.HeaderChar
	{mso-style-name:"Header Char";
	mso-style-link:Header;}
span.FooterChar
	{mso-style-name:"Footer Char";
	mso-style-link:Footer;}
span.BalloonTextChar
	{mso-style-name:"Balloon Text Char";
	mso-style-link:"Balloon Text";
	font-family:"Tahoma","sans-serif";}
.MsoChpDefault
	{font-family:"Calibri","sans-serif";}
 /* Page Definitions */
 @page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body lang=EN-US link=blue vlink=purple>

<div class=WordSection1>

<p class=MsoNormal align=center style='text-align:center'><b><span
style='font-size:14.0pt'>Practical Machine Learning Course Project</span></b></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><b>Introduction</b></p>

<p class=MsoNormal>The purpose of this paper is to describe the process and
result for building a model to predict the classification of the correctness of
an individual performing a Unilateral Dumbbell Biceps Curl using 3 dimensional
accelerometer, gyroscope, and magnetometer data taken from the arms, forearms,
belt, and dumbbells of the participants. Five different classifications are
considered, “Exactly according to the specification (Class A), throwing the
elbows to the front (Class B), lifting the dumbbell only halfway (Class C),
lowering the dumbbell only halfway (Class D) and throwing the hips to the front
(Class E).”<sup>1</sup> All of the data used and descriptions were taken from
Velloso et. al. This paper will describe the process of generating the model,
the cross validation performed, and the expected out of sample error.</p>

<p class=MsoNormal style='background:white'>&nbsp;</p>

<p class=MsoNormal><b>Building the Model</b></p>

<p class=MsoNormal>Two datasets were available for this project:</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>“pml-training.csv”
– A set of training data for use in creating the model</p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>“pml-testing.csv”
– A set of 20 data points for which the classification must be determined
without knowledge of the correct classification.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The first thing to consider when creating a model for this
data is to ask the right question for the purpose of the model. The true
purpose of this model is to predict the correct classification of the “pml-testing.csv”
using the quantitative data in “pml-training.csv” for development the model.
Aside from this, the secondary goal is to try to reproduce the results of the
original creators of the data, which was to determine if quantitative data
could be used to predict the correctness of the exercise.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The second thing that must be scrutinized is the data being
used. The most important aspect of the data to acknowledge is that it is all
from the same source. Regardless of what the dataset is called, it was all
taken from the same individuals, under the same conditions, continually over a
short time. Thus, the input data is the ideal training data that could be used
to predict the result of the “pml-testing.csv.” In addition, the creators of
the dataset also included several statistically derived variables, subsampling
the data points over time, in the dataset for their prediction purposes. These
are of no use for the purpose of this project as the “pml-testing.csv” data are
all discrete single time points.</p>

<p class=MsoNormal><b>&nbsp;</b></p>

<p class=MsoNormal>With these premises acknowledged, we can move into the
identification of features in the data for the purpose of prediction of the
classification. Two subsets of the “pml-training.csv” data were created, 60%
for training and 40% for testing per the standard rule of thumb. However, upon
executing the following feature plot there is a clear problem with feature
identification:</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='font-family:"Courier New"'>featurePlot(x=trainSub[,c(&quot;roll_belt&quot;,&quot;pitch_belt&quot;,&quot;yaw_belt&quot;)],</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>+ y=trainSub$user_name,</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>+ plot=&quot;pairs&quot;)</span></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal align=center style='text-align:center;page-break-after:avoid'><img
width=397 height=396 id="Picture 1"
src="Practical%20Machine%20Learning%20Course%20Project%20-%20Final_files/image001.jpg"></p>

<p class=MsoCaption align=center style='text-align:center'><a
name="_Ref393642073">Figure </a>1: <span style='font-weight:normal'>Feature
plot of belt accelerometer data colored by user.</span></p>

<p class=MsoNormal>As seen in Figure 1, the accelerometer data and features appear
to be heavily dependent on the user. This can be seen more clearly in Figure 2 and Figure 3 qplots below.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal align=center style='text-align:center;page-break-after:avoid'><img
width=359 height=359 id="Picture 2"
src="Practical%20Machine%20Learning%20Course%20Project%20-%20Final_files/image002.jpg"></p>

<p class=MsoCaption align=center style='text-align:center'><a
name="_Ref393642885">Figure </a>2: <span style='font-weight:normal'>pitch_belt
vs. roll_belt, colored by classe</span></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal align=center style='text-align:center;page-break-after:avoid'><img
width=361 height=361 id="Picture 3"
src="Practical%20Machine%20Learning%20Course%20Project%20-%20Final_files/image003.jpg"></p>

<p class=MsoCaption align=center style='text-align:center'><a
name="_Ref393642888">Figure </a>3:<span style='font-weight:normal'> pitch_belt
vs. roll_belt, colored by user_name</span></p>

<p class=MsoNormal>What initially look like features for class identification
are actually heavily dependent on the user_name. It would be very difficult to
manually try to identify features for each user and create basic models for
each of them. Thus, at this point it is best to skip simple feature
identification and modeling and jump to the more complex types of modeling. A
random forest model was chosen since they are highly accurate and the negative
aspects of slow speed, poor interpretability, and overfitting do not apply for
the purpose of this model.</p>

<p class=MsoNormal>When applying this model with all of the statistically
derived variables removed an odd result was produced. When it was applied to
the “pml-testing.csv” it classified all of the cases as “A”. Upon closer
inspection of the trees produced, covariate #1 was used in the tree. This
covariate is actually just a row index number which logically should not be
included in the random forest. However, in this case, the problem was not that
the row indexes were included in the model, it was that the “pml-testing.csv”
row indexes were false data with respect to the complete original set of data
(the row numbers were renumbered when making “pml-testing.csv”). Removing this
row number column from the random forest model produced correct prediction
results for all of the “pml-testing.csv” cases and a 99.8% accuracy on the
training data.</p>

<p class=MsoNormal><b>&nbsp;</b></p>

<p class=MsoNormal><b>Cross Validation</b></p>

<p class=MsoNormal>Since a random forest model subsamples the training data and
covariates several times and averages the results of the multiple trees
produced, it is essentially is doing a form of cross validation. Having
achieved the primary goal of the model to be able to predict the
classifications of the “pml-testing.csv” cases, there was no need to do cross
validation for this purpose. However, for the secondary purpose of trying to
determine the applicability of this model to predicting the correctness of an
exercise for any user, one of the users (carlitos) was removed (leave one out) from
the training dataset, as well as the time type covariates, and the random
forest was regenerated. By doing this, 18/20 of the “pml-testing.csv” cases
passed, but only 2/4 for the carlitos data. In addition, an overall accuracy of
90.8% on the testing 40% of the training data was produced, but for only the
carlitos data, an accuracy of 43.8% was produced.</p>

<p class=MsoNormal><b>&nbsp;</b></p>

<p class=MsoNormal><b>Out of Sample Error</b></p>

<p class=MsoNormal>As described the Cross Validation section, the approximate
overall out of sample error is 56.2% (1 - 43.8%), which is not suitable for
application to new users. The original creators of the dataset and study also
came to the conclusion that a greater number of users’ data would be necessary
to create a model that would be able to produce accurate results for a
completely new user. However, this doesn’t matter at all for the primary
purpose of this model since all of the data in “pml-testing.csv” is nearly
identical to the form of the data in the training set. Thus the 99.8% accuracy
holds for the most part in this case.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><b>Conclusion</b></p>

<p class=MsoNormal>The primary and secondary goals of this project have been
achieved. A high accuracy random forest model was created that correctly
classified all of the test cases in “pml-testing.csv.” The model was also
determined to be unsuitable for use on new users (requires more user data to be
more accurate), as was also the conclusion of the original creators of the
dataset. Cross validation, out of sample error, and the model construction decision
process were also addressed.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><b>References</b></p>

<p class=MsoNormal>The data for this project come from this source:&nbsp;<a
href="http://groupware.les.inf.puc-rio.br/har"><span style='color:#0000CC;
text-decoration:none'>http://groupware.les.inf.puc-rio.br/har</span></a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Velloso, E.; Bulling, A.; Gellersen, H.; Ugulino, W.; Fuks,
H. Qualitative Activity Recognition of Weight Lifting Exercises. Proceedings of
4th International Conference in Cooperation with SIGCHI (Augmented Human '13) .
Stuttgart, Germany: ACM SIGCHI, 2013.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>&nbsp;</p>

<span style='font-size:12.0pt;font-family:"Times New Roman","serif"'><br
clear=all style='page-break-before:always'>
</span>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><b><span style='font-size:14.0pt'>Appendix A – R Markdown</span></b></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='font-family:"Courier New"'># Setup</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>set.seed(32323)</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>memory.limit(size =
2000)</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>setwd(&quot;C:/Practical
Machine Learning/Project&quot;)</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>dataFile &lt;-
read.csv(&quot;C:/Practical Machine Learning/pml-training.csv&quot;)</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>library(caret);
library(kernlab); library(ggplot2)</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>inTrain &lt;-
createDataPartition(y=dataFile$classe,p=0.6,list=FALSE)</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>training &lt;-
dataFile[inTrain,]</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>testing &lt;-
dataFile[-inTrain,]</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'># Provided file
write function for testing answers</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>pml_write_files =
function(x){</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>  n = length(x)</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>  for(i in 1:n){</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>    filename =
paste0(&quot;problem_id_&quot;,i,&quot;.txt&quot;)</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>   
write.table(x[i],file=filename,quote=FALSE,row.names=FALSE,col.names=FALSE)</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>  }</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>}</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'># Gives the list of
variables with near zero variation to throw out</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>nsv &lt;-
nearZeroVar(training,saveMetrics=TRUE)</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>nsv</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>names(training)</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'># Also found test
data omits the identified nsv variables as well as others that are derived
based on statistics</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'># The paper uses a
sliding window and statistically derived features, which will not work for the
test data which looks at single points of data</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'># Keep only the good
variables</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>trainSub &lt;-
training[c(1,2,3,4,5,7,8,9,10,11,37,38,39,40,41,42,43,44,45,46,47,48,49,60,61,62,63,64,65,66,67,68,84,85,86,102,113,114,115,116,117,118,119,120,121,122,123,124,140,151,152,153,154,155,156,157,158,159,160)]</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>testSub &lt;-
testing[c(1,2,3,4,5,7,8,9,10,11,37,38,39,40,41,42,43,44,45,46,47,48,49,60,61,62,63,64,65,66,67,68,84,85,86,102,113,114,115,116,117,118,119,120,121,122,123,124,140,151,152,153,154,155,156,157,158,159,160)]</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'># Create feature
plot for exploratory analysis on logical groups (shows data is user specific
for ranges, features difficult to classify)</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>featurePlot(x=trainSub[,c(&quot;roll_belt&quot;,&quot;pitch_belt&quot;,&quot;yaw_belt&quot;)],</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>          y=trainSub$user_name,</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>          plot=&quot;pairs&quot;)</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'># Create a random
forest, had to increase memory, downsample more, remove row column covariate</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>trainSub &lt;-
training[c(1,2,3,4,5,7,8,9,10,11,37,38,39,40,41,42,43,44,45,46,47,48,49,60,61,62,63,64,65,66,67,68,84,85,86,102,113,114,115,116,117,118,119,120,121,122,123,124,140,151,152,153,154,155,156,157,158,159,160)]</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>testSub &lt;-
testing[c(1,2,3,4,5,7,8,9,10,11,37,38,39,40,41,42,43,44,45,46,47,48,49,60,61,62,63,64,65,66,67,68,84,85,86,102,113,114,115,116,117,118,119,120,121,122,123,124,140,151,152,153,154,155,156,157,158,159,160)]</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>Sys.time()</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>modFit &lt;-
train(classe~ .,data=trainSub,method=&quot;rf&quot;,prox=FALSE)</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>Sys.time()</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>modFit</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'># Shows that the
model gets 100% accuracy on the training/testing subset of training data</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>pred &lt;-
predict(modFit,testSub);</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>table(pred,testSub$classe)</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>pred2 &lt;-
predict(modFit,trainSub);</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>table(pred2,trainSub$classe)</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'># Use the model on
the real testing data (gives all &quot;A&quot;, clearly a problem here)</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>testDataFile &lt;-
read.csv(&quot;C:/Practical Machine Learning/pml-testing.csv&quot;)</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>finalTestSub &lt;-
testDataFile[c(1,2,3,4,5,7,8,9,10,11,37,38,39,40,41,42,43,44,45,46,47,48,49,60,61,62,63,64,65,66,67,68,84,85,86,102,113,114,115,116,117,118,119,120,121,122,123,124,140,151,152,153,154,155,156,157,158,159,160)]</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>predFinal &lt;-
predict(modFit,finalTestSub)</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>predFinal</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'># Regenerate the model
on data that removes the row covariate, Success! 100% of the pml-testing.csv
cases classified correctly</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>trainSub &lt;-
training[c(2,3,4,5,7,8,9,10,11,37,38,39,40,41,42,43,44,45,46,47,48,49,60,61,62,63,64,65,66,67,68,84,85,86,102,113,114,115,116,117,118,119,120,121,122,123,124,140,151,152,153,154,155,156,157,158,159,160)]</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>testSub &lt;-
testing[c(2,3,4,5,7,8,9,10,11,37,38,39,40,41,42,43,44,45,46,47,48,49,60,61,62,63,64,65,66,67,68,84,85,86,102,113,114,115,116,117,118,119,120,121,122,123,124,140,151,152,153,154,155,156,157,158,159,160)]</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>Sys.time()</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>modFit &lt;-
train(classe~ .,data=trainSub,method=&quot;rf&quot;,prox=FALSE)</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>Sys.time()</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>modFit</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>testDataFile &lt;-
read.csv(&quot;C:/Practical Machine Learning/pml-testing.csv&quot;)</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>finalTestSub &lt;-
testDataFile[c(2,3,4,5,7,8,9,10,11,37,38,39,40,41,42,43,44,45,46,47,48,49,60,61,62,63,64,65,66,67,68,84,85,86,102,113,114,115,116,117,118,119,120,121,122,123,124,140,151,152,153,154,155,156,157,158,159,160)]</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>predFinal &lt;-
predict(modFit,finalTestSub)</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>predFinal</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'># Redo model, remove
time covariates, and leave out the data from user=carlitos, 18/20 (2/4 failed
for carlitos) (B A B A A E D B A A A C B A E E A A B B)</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>trainSub &lt;-
training[c(2,8,9,10,11,37,38,39,40,41,42,43,44,45,46,47,48,49,60,61,62,63,64,65,66,67,68,84,85,86,102,113,114,115,116,117,118,119,120,121,122,123,124,140,151,152,153,154,155,156,157,158,159,160)]</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>trainSub &lt;-
subset(trainSub,trainSub$user != &quot;carlitos&quot;)</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>Sys.time()</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>modFit4 &lt;-
train(classe~ .,data=trainSub,method=&quot;rf&quot;,prox=FALSE)</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>Sys.time()</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>modFit4</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>finalTestSub &lt;-
testDataFile[c(2,8,9,10,11,37,38,39,40,41,42,43,44,45,46,47,48,49,60,61,62,63,64,65,66,67,68,84,85,86,102,113,114,115,116,117,118,119,120,121,122,123,124,140,151,152,153,154,155,156,157,158,159,160)]</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>predFinal &lt;- predict(modFit4,finalTestSub)</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>predFinal</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'># Check results on
the test 40% data</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>testSub &lt;-
testing[c(2,8,9,10,11,37,38,39,40,41,42,43,44,45,46,47,48,49,60,61,62,63,64,65,66,67,68,84,85,86,102,113,114,115,116,117,118,119,120,121,122,123,124,140,151,152,153,154,155,156,157,158,159,160)]</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>pred &lt;-
predict(modFit4,testSub);</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>table(pred,testSub$classe)</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>#        A    B   
C    D    E</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>#   A 2231  124 
114  193   76</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>#   B    0 1364  
31    2  120</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>#   C    0    3
1214    7    0</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>#   D    0    9    6
1082   15</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>#   E    1   18   
3    2 1231</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>testSub &lt;-
testing[c(2,8,9,10,11,37,38,39,40,41,42,43,44,45,46,47,48,49,60,61,62,63,64,65,66,67,68,84,85,86,102,113,114,115,116,117,118,119,120,121,122,123,124,140,151,152,153,154,155,156,157,158,159,160)]</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>testSub &lt;-
subset(testSub,testSub$user == &quot;carlitos&quot;)</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>pred &lt;-
predict(modFit4,testSub);</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>table(pred,testSub$classe)</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>#       A   B   C  
D   E</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>#   A 313 116 114
193  76</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>#   B   0 152  29  
2 116</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>#   C   0   0  32  
0   0</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>#   D   0   9   0  
0   8</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>#   E   0  18   3  
0  37</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'># Correct answers to
the pml-testing.csv data</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>x &lt;-
c(&quot;B&quot;,&quot;A&quot;,&quot;B&quot;,&quot;A&quot;,&quot;A&quot;,&quot;E&quot;,&quot;D&quot;,&quot;B&quot;,&quot;A&quot;,&quot;A&quot;,&quot;B&quot;,&quot;C&quot;,&quot;B&quot;,&quot;A&quot;,&quot;E&quot;,&quot;E&quot;,&quot;A&quot;,&quot;B&quot;,&quot;B&quot;,&quot;B&quot;)</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'>pml_write_files(x)</span></p>

</div>

</body>

</html>

